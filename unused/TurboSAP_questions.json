{
  "start": "intro",
  "nodes": {
    "intro": {
      "type": "question",
      "prompt": "Q1) What is the payroll period of your company? (weekly / biweekly / semi-monthly / monthly)",
      "write_to": "pay_frequency",
      "normalize": "lower_strip",
      "routes": {
        "weekly": "ask_weekly_pattern",
        "biweekly": "ask_biweekly_pattern",
        "semi-monthly|semimonthly": "ask_semimonthly_pattern",
        "monthly": "ask_monthly_pattern",
        "*": "end"
      }
    }, 
    "ask_weekly_pattern": {
      "type": "question",
      "prompt": "Q1b) For WEEKLY payroll, which cycle? (friday / monday)",
      "write_to": "period_pattern",
      "routes": {
        "friday|fri": "weekly_fri",
        "monday|mon": "weekly_mon",
        "*": "end"
      }
    },
    "ask_biweekly_pattern": {
      "type": "question",
      "prompt": "Q1b) For BIWEEKLY payroll, which cycle? (tuesday / monday)",
      "write_to": "period_pattern",
      "routes": {
        "tuesday|tue": "biweekly_tue",
        "monday|mon": "biweekly_mon",
        "*": "end"
      }
    },
    "ask_monthly_pattern": {
      "type": "question",
      "prompt": "Q1b) For MONTHLY payroll, which cutoff? (1st / 31st)",
      "write_to": "period_pattern",
      "routes": {
        "1|1st|first": "monthly_1st",
        "31|31st|thirty-first|thirty first": "monthly_31st",
        "*": "end"
      }
    },
    "ask_semimonthly_pattern": {
      "type": "question",
      "prompt": "Q1b) For SEMI-MONTHLY payroll, which ranges? (1-15 / 16-end)",
      "write_to": "period_pattern",
      "routes": {
        "1|1-15|1 to 15|1→15|1 -> 15|1..15|first": "semimonth_1_15",
        "16|16-end|16 to end|16→end|16 -> end|16..end|second": "semimonth_16_end",
        "*": "end"
      }
    },
    "weekly_fri": {
      "type": "commit",
      "set": {
        "period_pattern_code": "weekly_friday"
      },
      "message": "Recorded: Weekly Friday cycle",
      "next": "ask_services"
    },
    "weekly_mon": {
      "type": "commit",
      "set": {
        "period_pattern_code": "weekly_monday"
      },
      "message": "Recorded: Weekly Monday cycle",
      "next": "ask_services"
    },
    "biweekly_tue": {
      "type": "commit",
      "set": {
        "period_pattern_code": "biweekly_tuesday"
      },
      "message": "Recorded: Biweekly Tuesday cycle",
      "next": "ask_services"
    },
    "biweekly_mon": {
      "type": "commit",
      "set": {
        "period_pattern_code": "biweekly_monday"
      },
      "message": "Recorded: Biweekly Monday cycle",
      "next": "ask_services"
    },
    "monthly_1st": {
      "type": "commit",
      "set": {
        "period_pattern_code": "monthly_1st"
      },
      "message": "Recorded: Monthly 1st cutoff",
      "next": "ask_services"
    },
    "monthly_31st": {
      "type": "commit",
      "set": {
        "period_pattern_code": "monthly_31st"
      },
      "message": "Recorded: Monthly 31st cutoff",
      "next": "ask_services"
    },
    "semimonth_1_15": {
      "type": "commit",
      "set": {
        "period_pattern_code": "semimonthly_1-15"
      },
      "message": "Recorded: Semi-monthly 1–15",
      "next": "ask_services"
    },
    "semimonth_16_end": {
      "type": "commit",
      "set": {
        "period_pattern_code": "semimonthly_16-end"
      },
      "message": "Recorded: Semi-monthly 16–end",
      "next": "ask_services"
    },
    "ask_services": {
      "type": "question",
      "prompt": "Q2) What is your company services about? (construction / education / engineering)",
      "write_to": "service_type",
      "routes": {
        "construction|construnction": "ask_timezone",
        "education": "ask_timezone",
        "engineering": "ask_timezone",
        "*": "ask_timezone"
      }
    },
    "ask_timezone": {
      "type": "question",
      "prompt": "Q3) What is your time zone? (mainland / hawaii)",
      "write_to": "time_zone",
      "routes": {
        "mainland|us mainland|continental": "tz_mainland",
        "hawaii|hst": "tz_hawaii",
        "*": "end"
      }
    },
    "tz_mainland": {
      "type": "commit",
      "set": {
        "time_zone_code": "US_MAINLAND"
      },
      "message": "Recorded time zone: US Mainland",
      "next": "end"
    },
    "tz_hawaii": {
      "type": "commit",
      "set": {
        "time_zone_code": "US_HST"
      },
      "message": "Recorded time zone: Hawaii (HST)",
      "next": "end"
    },
    "end": {
      "type": "end"
    }
  }
}